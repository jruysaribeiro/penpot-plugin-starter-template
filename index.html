<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Penpot AI Designer</title>
  </head>
  <body>
    <h2>Penpot AI Designer</h2>

    <!-- Tab Navigation -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="ai-generation">
        AI Generation
      </button>
      <button class="tab-btn" data-tab="image-tracing">Image Tracing</button>
      <button class="tab-btn" data-tab="pdf-import">PDF Import</button>
      <button class="tab-btn" data-tab="translation">Translation</button>
    </div>

    <!-- Tab Content: AI Generation -->
    <div class="tab-content active" id="ai-generation">
      <div class="form-group" id="apiKeyContainer">
        <label for="apiKey">Gemini API Key</label>
        <input
          type="password"
          id="apiKey"
          placeholder="Enter your Gemini API key"
          data-input="apiKey"
        />
        <small
          >Your key is stored locally and never shared.
          <a href="https://aistudio.google.com/app/apikey" target="_blank"
            >Get one free ‚Üí</a
          ></small
        >
      </div>

      <div class="form-group">
        <label for="description">Design Description</label>
        <textarea
          id="description"
          rows="3"
          placeholder="Describe what you want to create..."
          data-input="description"
        ></textarea>
        <small
          id="selectionHint"
          style="display: none; color: var(--color-accent)"
        >
          ‚ú® Selection detected
        </small>
      </div>

      <div class="form-group" id="selectionOptions" style="display: none">
        <label class="checkbox-label">
          <input type="checkbox" id="useSelectionReference" />
          <span>Use selected elements as design reference</span>
        </label>
        <small>Use the style of your selected elements</small>
      </div>

      <div class="form-group">
        <label>Reference Image (Optional)</label>
        <div id="dropZone" class="drop-zone">
          <span id="dropZoneText"
            >üìé Drag & drop an image or click to upload</span
          >
          <img
            id="previewImage"
            style="
              display: none;
              max-width: 100%;
              max-height: 150px;
              border-radius: 4px;
              margin-top: 8px;
            "
          />
        </div>
        <input
          type="file"
          id="fileInput"
          accept="image/*"
          style="display: none"
        />
        <small
          >Upload a reference image for the AI to analyze and create
          variations</small
        >
      </div>

      <details class="options-section">
        <summary>‚ú® Style Options & Filters</summary>

        <div class="form-group">
          <label>Quick Examples</label>
          <div class="chip-group" id="examplePrompts">
            <button
              type="button"
              class="chip"
              data-example="Modern rocket logo with geometric shapes"
            >
              üöÄ Rocket Logo
            </button>
            <button
              type="button"
              class="chip"
              data-example="Minimalist sun icon with warm gradient"
            >
              ‚òÄÔ∏è Sun Icon
            </button>
            <button
              type="button"
              class="chip"
              data-example="Abstract geometric pattern with triangles"
            >
              üî∑ Geometric Pattern
            </button>
            <button
              type="button"
              class="chip"
              data-example="Coffee cup with steam, line art style"
            >
              ‚òï Coffee Cup
            </button>
            <button
              type="button"
              class="chip"
              data-example="Mountain landscape with sunset colors"
            >
              üèîÔ∏è Landscape
            </button>
            <button
              type="button"
              class="chip"
              data-example="Tech circuit board pattern background"
            >
              ‚ö° Tech Pattern
            </button>
          </div>
        </div>

        <div class="form-group">
          <label for="modelSelect">AI Model</label>
          <select id="modelSelect">
            <option value="nano-banana-pro-preview">
              Nano Banana Pro (Recommended)
            </option>
            <option value="gemini-3-pro-preview">Gemini 3 Pro</option>
            <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
            <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
            <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
          </select>
          <small>Choose which model generates your designs</small>
        </div>

        <div class="form-group">
          <label for="stylePreset">Art Style</label>
          <select id="stylePreset">
            <option value="">Auto (AI decides)</option>
            <option value="minimalist">Minimalist</option>
            <option value="modern">Modern</option>
            <option value="abstract">Abstract</option>
            <option value="geometric">Geometric</option>
            <option value="line-art">Line Art</option>
            <option value="flat-design">Flat Design</option>
            <option value="gradient">Gradient-heavy</option>
            <option value="vintage">Vintage</option>
            <option value="hand-drawn">Hand-drawn</option>
            <option value="isometric">Isometric</option>
          </select>
        </div>

        <div class="form-group">
          <label for="colorScheme">Color Scheme</label>
          <select id="colorScheme">
            <option value="">Any colors</option>
            <option value="vibrant">Vibrant & Bold</option>
            <option value="pastel">Soft Pastels</option>
            <option value="monochrome">Monochrome</option>
            <option value="warm">Warm Tones</option>
            <option value="cool">Cool Tones</option>
            <option value="earth">Earth Tones</option>
            <option value="neon">Neon Colors</option>
            <option value="grayscale">Grayscale</option>
          </select>
        </div>

        <div class="form-group">
          <label for="complexity">Complexity</label>
          <select id="complexity">
            <option value="">Balanced</option>
            <option value="simple">Simple & Clean</option>
            <option value="detailed">Detailed & Intricate</option>
          </select>
        </div>

        <div class="form-group">
          <label for="size">Canvas Size</label>
          <select id="size">
            <option value="from-selection">From Selection</option>
            <option value="500x500">Square (500√ó500)</option>
            <option value="800x600">Landscape (800√ó600)</option>
            <option value="600x800">Portrait (600√ó800)</option>
            <option value="1000x400">Wide Banner (1000√ó400)</option>
            <option value="400x400">Icon (400√ó400)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="variations">Number of Variations</label>
          <select id="variations">
            <option value="1">1 design</option>
            <option value="2">2 variations</option>
            <option value="3" selected>3 variations</option>
            <option value="4">4 variations</option>
            <option value="5">5 variations</option>
          </select>
          <small>Generate multiple options to choose from</small>
        </div>

        <div class="form-group">
          <label for="svgMode">SVG Generation Mode</label>
          <select id="svgMode">
            <option value="editable">
              Fully Editable (Simple shapes only)
            </option>
            <option value="quality" selected>
              High Quality (May use complex features)
            </option>
          </select>
          <small
            >Editable mode ensures every element can be edited. Quality mode
            prioritizes visual appearance.</small
          >
        </div>

        <div class="form-group">
          <label>Elements to Include</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="includeGradients" />
              <span>Gradients</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="includeShadows" />
              <span>Shadows/Depth</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="includeTexture" />
              <span>Texture</span>
            </label>
          </div>
        </div>
      </details>

      <button
        type="button"
        data-appearance="primary"
        data-handler="generate"
        id="generateBtn"
      >
        Generate Design
      </button>

      <div id="status" class="status-message"></div>
    </div>
    <!-- End Tab Content: AI Generation -->

    <!-- Tab Content: Image Tracing -->
    <div class="tab-content" id="image-tracing">
      <div class="form-group">
        <label>Image Tracing (PNG ‚Üí SVG)</label>
        <div id="traceDropZone" class="drop-zone">
          <span id="traceDropZoneText">üñåÔ∏è Drop PNG/JPG to trace into SVG</span>
          <img
            id="tracePreviewImage"
            style="
              display: none;
              max-width: 100%;
              max-height: 150px;
              border-radius: 4px;
              margin-top: 8px;
            "
          />
        </div>
        <input
          type="file"
          id="traceFileInput"
          accept="image/*"
          style="display: none"
        />
        <button
          type="button"
          data-appearance="primary"
          id="traceBtn"
          style="display: none; margin-top: 8px; width: 100%"
        >
          Trace to SVG
        </button>
        <small>Convert bitmap images to vector SVG paths</small>
      </div>
    </div>
    <!-- End Tab Content: Image Tracing -->

    <!-- Tab Content: PDF Import -->
    <div class="tab-content" id="pdf-import">
      <div class="form-group">
        <label>Upload PDF Presentation</label>
        <div id="pdfDropZone" class="drop-zone">
          <span id="pdfDropZoneText">üìÑ Drop PDF or click to upload</span>
        </div>
        <input
          type="file"
          id="pdfFileInput"
          accept=".pdf"
          style="display: none"
        />
        <small>Upload a PDF presentation to import slides into Penpot</small>
      </div>

      <div id="pdfInfo" style="display: none; margin-bottom: 16px">
        <strong>PDF Loaded:</strong> <span id="pdfFileName"></span><br />
        <strong>Pages:</strong> <span id="pdfPageCount"></span>
      </div>

      <div class="form-group" style="display: none" id="pdfControls">
        <label for="pdfScale">Image Quality (Scale)</label>
        <select id="pdfScale">
          <option value="1">Standard (1x)</option>
          <option value="2" selected>High (2x)</option>
          <option value="3">Very High (3x)</option>
        </select>
        <small>Higher quality creates larger images but better clarity</small>
      </div>

      <div id="pdfButtons" style="display: none; margin-top: 16px">
        <button
          type="button"
          data-appearance="primary"
          id="importAllPagesBtn"
          style="width: 100%; margin-bottom: 8px"
        >
          Import All Pages
        </button>
        <button
          type="button"
          data-appearance="secondary"
          id="importCurrentPageBtn"
          style="width: 100%"
        >
          Import Page <span id="currentPageNum">1</span>
        </button>
        <div
          style="display: flex; gap: 8px; margin-top: 8px; align-items: center"
        >
          <button type="button" id="prevPageBtn" style="flex: 1">
            ‚Üê Previous
          </button>
          <span style="padding: 0 8px"
            >Page <span id="pageIndicator">1</span> of
            <span id="totalPages">1</span></span
          >
          <button type="button" id="nextPageBtn" style="flex: 1">Next ‚Üí</button>
        </div>
      </div>

      <div id="pdfPreviewContainer" style="margin-top: 16px; display: none">
        <canvas
          id="pdfPreviewCanvas"
          style="
            max-width: 100%;
            border: 1px solid var(--color-border);
            border-radius: 4px;
          "
        ></canvas>
      </div>

      <div id="pdfStatus" class="status-message"></div>
    </div>
    <!-- End Tab Content: PDF Import -->

    <!-- Tab Content: Translation -->
    <div class="tab-content" id="translation">
      <div class="form-group">
        <label for="sourceLanguage">Source Language</label>
        <select id="sourceLanguage">
          <option value="auto">Auto-detect</option>
          <option value="en">English</option>
          <option value="es">Spanish</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="it">Italian</option>
          <option value="pt">European Portuguese</option>
          <option value="zh">Chinese</option>
          <option value="ja">Japanese</option>
          <option value="ko">Korean</option>
          <option value="ar">Arabic</option>
          <option value="ru">Russian</option>
        </select>
      </div>

      <div class="form-group">
        <label for="targetLanguage">Target Language</label>
        <select id="targetLanguage">
          <option value="en">English</option>
          <option value="es">Spanish</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="it">Italian</option>
          <option value="pt">European Portuguese</option>
          <option value="zh">Chinese</option>
          <option value="ja">Japanese</option>
          <option value="ko">Korean</option>
          <option value="ar">Arabic</option>
          <option value="ru">Russian</option>
        </select>
      </div>

      <div class="form-group">
        <label>
          <input type="checkbox" id="useSelectedText" />
          Use selected text from Penpot
        </label>
        <small
          >Check this to translate text from selected shapes in Penpot</small
        >
      </div>

      <div class="form-group" id="textInputGroup">
        <label for="textToTranslate">Text to Translate</label>
        <textarea
          id="textToTranslate"
          rows="5"
          placeholder="Enter or paste text to translate..."
        ></textarea>
      </div>

      <button
        type="button"
        data-appearance="primary"
        id="translateBtn"
        style="width: 100%; margin-bottom: 16px"
      >
        Translate
      </button>

      <div id="translationResult" style="display: none; margin-top: 16px">
        <label>Translation</label>
        <div
          id="translatedText"
          style="
            padding: 12px;
            background: var(--color-background-secondary);
            border-radius: 4px;
            white-space: pre-wrap;
            margin-bottom: 8px;
          "
        ></div>
        <button
          type="button"
          data-appearance="secondary"
          id="copyTranslationBtn"
          style="width: 100%; margin-bottom: 8px"
        >
          Copy Translation
        </button>
        <button
          type="button"
          data-appearance="secondary"
          id="replaceTextBtn"
          style="width: 100%; display: none"
        >
          Replace Selected Text in Penpot
        </button>
      </div>

      <div id="translationStatus" class="status-message"></div>
    </div>
    <!-- End Tab Content: Translation -->

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
